machine:
  node:
    version: 5.0.0
  environment:
    ISTANBUL_REPORT_DIR: coverage
    ISTANBUL_REPORTERS: lcovonly

dependencies:
  cache_directories:
    - ~/opencv-3.1.0

  pre:
    - sudo apt-get update
    - sudo apt-get install poppler-utils
    - sudo apt-get install tesseract-ocr
    - bash <(curl -s https://raw.githubusercontent.com/danschultzer/receipt-scanner/master/bin/circle-install.sh)

test:
  override:
    - npm run coverage
  post:
    - bash <(curl -s https://codecov.io/bash)
